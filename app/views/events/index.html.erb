<p style="color: green"><%= notice %></p>

<div class="flex items-center justify-between flex-wrap">
  <div class="flex flex-wrap my-12 items-center">
      <%= link_to events_path(current_view: "today"), data: { turbo: false } do %>
        <h1 class="font-bold text-4xl text-blue-500">Kalender</h1>
      <% end %>  
    <%= link_to new_event_path do %>
      <button class="bg-transparent hover:bg-blue-500 text-blue-500 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded ml-12">
        + Neuer Kalendereintrag
      </button>
    <% end %>
  </div>

  <div>
    <%= link_to events_path(current_view: "today"), data: { turbo: false } do %>
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-3 rounded">
        <span class="material-symbols-outlined inline-block align-middle" title="Ansicht heute">calendar_today</span>
      </button>
    <% end %>
    <%= link_to events_path(current_view: "this_week"), data: { turbo: false } do %>
     <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-3 rounded">
        <span class="material-symbols-outlined inline-block align-middle" title="Ansicht diese Woche">calendar_view_week</span>
      </button>
    <% end %>
    <%= link_to events_path(current_view: "this_month"), data: { turbo: false } do %>
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-3 rounded">
        <span class="material-symbols-outlined inline-block align-middle" title="Ansicht dieser Monat">calendar_month</span>
      </button>
    <% end %>
    <%= link_to events_path(current_view: "this_year"), data: { turbo: false } do %>
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-3 rounded">
        <p class="inline-block align-middle" title="Ansicht dieses Jahr"><%= Date.today.year %></p>
      </button>
    <% end %>
    <%= link_to reschedule_past_events_path, data: { turbo: false } do %>
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-3 rounded">
        <span class="material-symbols-outlined inline-block align-middle" title="Reschedule Past Events">autorenew</span>
      </button>
    <% end %> 
    <%= link_to export_events_to_csv_path(format: 'csv'), data: { turbo: false } do %>
      <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-3 rounded">
        <span class="material-symbols-outlined inline-block align-middle" title="Export Events to CSV">csv</span>
      </button>
    <% end %> 
  </div>
</div>



<% if session[:current_view] == "today" %>
  <%= render "view_today", events: @events %>

  <div class="bg-slate-200 p-5 md:w-1/3 mt-12">
    <%= form_tag import_events_from_csv_path, multipart: true do %>
      Import Events from CSV:
      <div>
        <%= file_field_tag :file %>
        <%= submit_tag "Importieren", class: "cursor-pointer bg-transparent hover:bg-blue-500 text-blue-500 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded mt-12", data: { turbo: false } %>        
      </div>
    <% end %>
  </div>
<% elsif session[:current_view] == "this_week" %>
  <%= render "view_this_week", events: @events %>
<% elsif session[:current_view] == "this_month" %>
  <%= render "view_this_month", events: @events %>
<% elsif session[:current_view] == "this_year" %>
  <%= render "view_this_year", events: @events %>
<% else %>
  <%= render "view_this_week", events: @events %>
<% end %>